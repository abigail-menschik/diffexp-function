# diffexp-function
function to run differential expression

library(GEOquery)
library(limma)

# formatting the data/making targets file not part of the function
# assume that has been done already in the code

diffexp <- function(GSE) {

design<-model.matrix(~ 0+factor(c(1,2)));
colnames(design) <- c("group1", group2");
fit <- lmfit(eset, design);
contrast.matrix <- makeContrasts(group2-group1, levels=design);
fit2 <- contrasts.fit(fit, contrast.matrix);
fit2 <- eBayes(fit2);
tt <- topTable(fit2, coef=1, number=Inf);
return(tt)

}
    


calldata <- function(x) {samples
